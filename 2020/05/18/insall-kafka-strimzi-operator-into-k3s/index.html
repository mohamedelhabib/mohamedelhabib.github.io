<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Insall Strimzi kafka operator into k3d | Enjoy Technology</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="manifest" href="/assets/manifest.json">
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/assets/icons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
    <link rel="preconnect" href="https://www.google-analytics.com">
    <link rel="preconnect" href="https://storage.googleapis.com">
    <meta name="description" content="A set of posts to share technology finding and help to get started">
    <meta name="theme-color" content="#ffffff">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Enjoy Technology">
    <meta name="application-name" content="Enjoy Technology">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-config" content="/assets/ieconfig.xml">
    <meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="google-site-verification" content="vaHfBtNF19BYEIpHn505BzxJ8a6lWlV6JO2GOdqptfY">
    <link rel="preload" href="/assets/css/0.styles.05b5abf3.css" as="style"><link rel="preload" href="/assets/js/app.9867d2ee.js" as="script"><link rel="preload" href="/assets/js/4.c6323ad2.js" as="script"><link rel="preload" href="/assets/js/2.79e1ebb6.js" as="script"><link rel="preload" href="/assets/js/13.39b88b44.js" as="script"><link rel="preload" href="/assets/js/6.d7f91b89.js" as="script"><link rel="prefetch" href="/assets/js/10.efdfd574.js"><link rel="prefetch" href="/assets/js/11.af07a843.js"><link rel="prefetch" href="/assets/js/12.cd13affe.js"><link rel="prefetch" href="/assets/js/14.a9fa26a6.js"><link rel="prefetch" href="/assets/js/15.c0b71d42.js"><link rel="prefetch" href="/assets/js/3.8bab5a9e.js"><link rel="prefetch" href="/assets/js/5.f132e9b5.js"><link rel="prefetch" href="/assets/js/7.ada2a324.js"><link rel="prefetch" href="/assets/js/8.724a125e.js"><link rel="prefetch" href="/assets/js/9.2d0a0718.js">
    <link rel="stylesheet" href="/assets/css/0.styles.05b5abf3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/icons/favicon-32x32.png" alt="Enjoy Technology" class="logo"> <span class="site-name can-hide">Enjoy Technology</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Insall Strimzi kafka operator into k3d</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/2020/05/18/insall-kafka-strimzi-operator-into-k3s/#what-is-strimzi" class="sidebar-link">What is Strimzi?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2020/05/18/insall-kafka-strimzi-operator-into-k3s/#operator-pattern-in-kubernetes" class="sidebar-link">Operator pattern in Kubernetes</a></li><li class="sidebar-sub-header"><a href="/2020/05/18/insall-kafka-strimzi-operator-into-k3s/#strimzi-kafka-operator" class="sidebar-link">Strimzi Kafka Operator</a></li></ul></li><li><a href="/2020/05/18/insall-kafka-strimzi-operator-into-k3s/#what-is-k3s-the-official-definition" class="sidebar-link">What is k3s (the official definition)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2020/05/18/insall-kafka-strimzi-operator-into-k3s/#what-is-k3d" class="sidebar-link">What is k3d?</a></li></ul></li><li><a href="/2020/05/18/insall-kafka-strimzi-operator-into-k3s/#requirements" class="sidebar-link">Requirements</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/2020/05/18/insall-kafka-strimzi-operator-into-k3s/#deploy-kafka-into-k3d" class="sidebar-link">Deploy Kafka into k3d</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2020/05/18/insall-kafka-strimzi-operator-into-k3s/#install-k3d" class="sidebar-link">Install k3d</a></li></ul></li><li><a href="/2020/05/18/insall-kafka-strimzi-operator-into-k3s/#create-a-kubernetes-cluster" class="sidebar-link">Create a Kubernetes cluster</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/2020/05/18/insall-kafka-strimzi-operator-into-k3s/#deploy-strimzi-kafka-operator" class="sidebar-link">Deploy Strimzi Kafka operator</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2020/05/18/insall-kafka-strimzi-operator-into-k3s/#create-the-kafka-namespace-manifest" class="sidebar-link">Create the kafka namespace manifest</a></li><li class="sidebar-sub-header"><a href="/2020/05/18/insall-kafka-strimzi-operator-into-k3s/#create-the-strimzi-kafka-operator-namespace-manifest" class="sidebar-link">Create the strimzi kafka operator namespace manifest</a></li><li class="sidebar-sub-header"><a href="/2020/05/18/insall-kafka-strimzi-operator-into-k3s/#create-the-kafka-namespace-manifest-2" class="sidebar-link">Create the kafka namespace manifest</a></li><li class="sidebar-sub-header"><a href="/2020/05/18/insall-kafka-strimzi-operator-into-k3s/#deploy-into-kubernetes" class="sidebar-link">Deploy into Kubernetes</a></li><li class="sidebar-sub-header"><a href="/2020/05/18/insall-kafka-strimzi-operator-into-k3s/#test-using-kafka-console-producer-and-kafka-console-consumer" class="sidebar-link">Test using kafka-console-producer and kafka-console-consumer</a></li></ul></li></ul></section></li></ul> <footer class="footer" data-v-d9212786><ul class="sidebar-social" data-v-d9212786><li class="contact-item" data-v-d9212786><a href="https://github.com/mohamedelhabib" title="github" data-v-d9212786><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-d9212786 data-v-d9212786><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-d9212786 data-v-d9212786></path></svg>
        github
      </a></li><li class="contact-item" data-v-d9212786><a href="https://twitter.com/elhabib_med" title="twitter" data-v-d9212786><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter" data-v-d9212786 data-v-d9212786><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z" data-v-d9212786 data-v-d9212786></path></svg>
        twitter
      </a></li><li class="contact-item" data-v-d9212786><a href="https://www.linkedin.com/in/mohamed-el-habib-77165222" title="linkedin" data-v-d9212786><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-linkedin" data-v-d9212786 data-v-d9212786><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z" data-v-d9212786 data-v-d9212786></path><rect x="2" y="9" width="4" height="12" data-v-d9212786 data-v-d9212786></rect><circle cx="4" cy="4" r="2" data-v-d9212786 data-v-d9212786></circle></svg>
        linkedin
      </a></li></ul> <div class="copyright" data-v-d9212786>MIT Licensed | Copyright © 2020-present</div></footer></aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="what-is-strimzi"><a href="#what-is-strimzi" class="header-anchor">#</a> What is Strimzi?</h2> <h3 id="operator-pattern-in-kubernetes"><a href="#operator-pattern-in-kubernetes" class="header-anchor">#</a> Operator pattern in Kubernetes</h3> <blockquote><p>Extract from https://kubernetes.io/docs/concepts/extend-kubernetes/operator/</p></blockquote> <p>Kubernetes is designed for automation. Out of the box, you get lots of built-in automation from the core of Kubernetes. You can use Kubernetes to automate deploying and running workloads, and you can automate how Kubernetes does that <code>using Operators</code>.</p> <p>Kubernetes controllers concept lets you extend the cluster’s behaviour without modifying the code of Kubernetes itself. Operators are clients of the Kubernetes API that act as controllers for a Custom Resource.</p> <h3 id="strimzi-kafka-operator"><a href="#strimzi-kafka-operator" class="header-anchor">#</a> Strimzi Kafka Operator</h3> <blockquote><p>Extract from https://strimzi.io/docs/operators/master/overview.html</p></blockquote> <p>Strimzi provides container images and Operators for running Kafka on Kubernetes.<br>
Operators simplify the process of:</p> <ul><li>Deploying and running Kafka clusters</li> <li>Deploying and running Kafka components</li> <li>Configuring access to Kafka</li> <li>Securing access to Kafka</li> <li>Upgrading Kafka</li> <li>Managing brokers</li> <li>Creating and managing topics</li> <li>Creating and managing users</li></ul> <h2 id="what-is-k3s-the-official-definition"><a href="#what-is-k3s-the-official-definition" class="header-anchor">#</a> What is k3s (the official definition)</h2> <p><code>k3s</code> is a fully compliant Kubernetes distribution with the following changes:</p> <ol><li>Packaged as a single binary.</li> <li>Lightweight storage backend based on sqlite3 as the default storage mechanism. etcd3, MySQL, Postgres also still available.</li> <li>Wrapped in simple launcher that handles a lot of the complexity of TLS and options.</li> <li>Secure by default with reasonable defaults for lightweight environments.</li> <li>Minimal to no OS dependencies (just a sane kernel and cgroup mounts needed). k3s packages required
dependencies
<ul><li>containerd</li> <li>Flannel</li> <li>CoreDNS</li> <li>CNI</li> <li>Host utilities (iptables, socat, etc)</li> <li>Ingress controller (traefik)</li> <li>Embedded service loadbalancer</li> <li>Embedded network policy controller</li></ul></li></ol> <h3 id="what-is-k3d"><a href="#what-is-k3d" class="header-anchor">#</a> What is k3d?</h3> <p><code>k3d</code> is a <code>Go</code> binary file that run <code>k3s</code> in docker. A very simple installation way and no modification in your system just one docker container that contain the Kubernetes cluster.</p> <h2 id="requirements"><a href="#requirements" class="header-anchor">#</a> Requirements</h2> <ul><li>docker</li> <li>kubectl</li></ul> <h2 id="deploy-kafka-into-k3d"><a href="#deploy-kafka-into-k3d" class="header-anchor">#</a> Deploy Kafka into k3d</h2> <h3 id="install-k3d"><a href="#install-k3d" class="header-anchor">#</a> Install k3d</h3> <p>The installation script <code>install.sh</code> will run the following steps</p> <div class="language-bash extra-class"><pre class="language-bash"><code>initArch <span class="token comment"># discovers the architecture for this system</span>
initOS <span class="token comment"># discovers the operating system for this system</span>
verifySupported <span class="token comment"># checks that the os/arch combination is supported for binary builds</span>
checkTagProvided <span class="token operator">||</span> checkLatestVersion
<span class="token keyword">if</span> <span class="token operator">!</span> checkK3dInstalledVersion<span class="token punctuation">;</span> <span class="token keyword">then</span>
  downloadFile <span class="token comment"># downloads the latest binary package and also the checksum</span>
  installFile <span class="token comment"># make the Go binary file executable and mv it to /usr/local/bin/.</span>
<span class="token keyword">fi</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">:</span><span class="token variable">${K3D_INSTALL_DIR<span class="token operator">:=</span>&quot;<span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>bin&quot;}</span>
<span class="token punctuation">..</span>.
<span class="token function-name function">installFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;Preparing to install <span class="token variable">$APP_NAME</span> into <span class="token variable">${K3D_INSTALL_DIR}</span>&quot;</span>
  runAsRoot <span class="token function">chmod</span> +x <span class="token string">&quot;<span class="token variable">$K3D_TMP_FILE</span>&quot;</span>
  runAsRoot <span class="token function">cp</span> <span class="token string">&quot;<span class="token variable">$K3D_TMP_FILE</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$K3D_INSTALL_DIR</span>/<span class="token variable">$APP_NAME</span>&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$APP_NAME</span> installed into <span class="token variable">$K3D_INSTALL_DIR</span>/<span class="token variable">$APP_NAME</span>&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>To install <code>k3d</code> run the following command</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">curl</span> -s https://raw.githubusercontent.com/rancher/k3d/v1.7.0/install.sh <span class="token operator">|</span> <span class="token function">bash</span>
</code></pre></div><h2 id="create-a-kubernetes-cluster"><a href="#create-a-kubernetes-cluster" class="header-anchor">#</a> Create a Kubernetes cluster</h2> <p>Run this command to create the Kubernetes cluster</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ k3d create --name mykube
INFO<span class="token punctuation">[</span>0000<span class="token punctuation">]</span> Created cluster network with ID ca3f27c73582ea01d220103908d5a316bbb2dfdfa53bf6c16821d30a0877e1c4 
INFO<span class="token punctuation">[</span>0000<span class="token punctuation">]</span> Created docker volume  k3d-mykube-images        
INFO<span class="token punctuation">[</span>0000<span class="token punctuation">]</span> Creating cluster <span class="token punctuation">[</span>mykube<span class="token punctuation">]</span>                       
INFO<span class="token punctuation">[</span>0000<span class="token punctuation">]</span> Creating server using docker.io/rancher/k3s:v1.17.3-k3s1<span class="token punctuation">..</span>. 
INFO<span class="token punctuation">[</span>0001<span class="token punctuation">]</span> SUCCESS: created cluster <span class="token punctuation">[</span>mykube<span class="token punctuation">]</span>               
INFO<span class="token punctuation">[</span>0001<span class="token punctuation">]</span> You can now use the cluster with:
<span class="token builtin class-name">export</span> <span class="token assign-left variable">KUBECONFIG</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>k3d get-kubeconfig --name<span class="token operator">=</span><span class="token string">'mykube'</span><span class="token variable">)</span></span>&quot;</span>
kubectl cluster-info
</code></pre></div><p>As requested above run this command to configure kubectl to be able to access to the Kubernetes cluster and run <code>kubectl cluster-info</code> to test.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">KUBECONFIG</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>k3d get-kubeconfig --name<span class="token operator">=</span><span class="token string">'mykube'</span><span class="token variable">)</span></span>&quot;</span>
$ kubectl cluster-info
Kubernetes master is running at https://localhost:6443
CoreDNS is running at https://localhost:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy
Metrics-server is running at https://localhost:6443/api/v1/namespaces/kube-system/services/https:metrics-server:/proxy
</code></pre></div><p>You should have a docker new running container containing the <code>k3s</code> cluster</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ docker <span class="token function">ps</span>
CONTAINER ID        IMAGE                      COMMAND                  CREATED             STATUS              PORTS                    NAMES
4a672054b66c        rancher/k3s:v1.17.3-k3s1   <span class="token string">&quot;/bin/k3s server --h…&quot;</span>   About an hour ago   Up About an hour    <span class="token number">0.0</span>.0.0:6443-<span class="token operator">&gt;</span><span class="token number">6443</span>/tcp   k3d-mykube-server
</code></pre></div><h2 id="deploy-strimzi-kafka-operator"><a href="#deploy-strimzi-kafka-operator" class="header-anchor">#</a> Deploy Strimzi Kafka operator</h2> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">mkdir</span> k8s
</code></pre></div><h3 id="create-the-kafka-namespace-manifest"><a href="#create-the-kafka-namespace-manifest" class="header-anchor">#</a> Create the kafka namespace manifest</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">touch</span> k8s/01_namespace.yml 
</code></pre></div><p>Edit the <code>k8s/01_namespace.yml</code> file and paste the following content</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Namespace
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> kafka
</code></pre></div><h3 id="create-the-strimzi-kafka-operator-namespace-manifest"><a href="#create-the-strimzi-kafka-operator-namespace-manifest" class="header-anchor">#</a> Create the strimzi kafka operator namespace manifest</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">curl</span> https://strimzi.io/install/latest?namespace<span class="token operator">=</span>kafka -o k8s/02_strimzi_kafka_operator.yml
</code></pre></div><h3 id="create-the-kafka-namespace-manifest-2"><a href="#create-the-kafka-namespace-manifest-2" class="header-anchor">#</a> Create the kafka namespace manifest</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">curl</span> https://strimzi.io/examples/latest/kafka/kafka-persistent-single.yaml -o 03_kafka-persistent-single.yml
</code></pre></div><h3 id="deploy-into-kubernetes"><a href="#deploy-into-kubernetes" class="header-anchor">#</a> Deploy into Kubernetes</h3> <p>Run the following command to deploy created manifests.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl apply --namespace<span class="token operator">=</span>kafka -R -f k8s
namespace/kafka created
customresourcedefinition.apiextensions.k8s.io/kafkas.kafka.strimzi.io created
rolebinding.rbac.authorization.k8s.io/strimzi-cluster-operator-entity-operator-delegation created
clusterrolebinding.rbac.authorization.k8s.io/strimzi-cluster-operator created
rolebinding.rbac.authorization.k8s.io/strimzi-cluster-operator-topic-operator-delegation created
customresourcedefinition.apiextensions.k8s.io/kafkausers.kafka.strimzi.io created
customresourcedefinition.apiextensions.k8s.io/kafkamirrormaker2s.kafka.strimzi.io created
clusterrole.rbac.authorization.k8s.io/strimzi-entity-operator created
clusterrole.rbac.authorization.k8s.io/strimzi-cluster-operator-global created
clusterrolebinding.rbac.authorization.k8s.io/strimzi-cluster-operator-kafka-broker-delegation created
rolebinding.rbac.authorization.k8s.io/strimzi-cluster-operator created
clusterrole.rbac.authorization.k8s.io/strimzi-cluster-operator-namespaced created
clusterrole.rbac.authorization.k8s.io/strimzi-topic-operator created
serviceaccount/strimzi-cluster-operator created
clusterrole.rbac.authorization.k8s.io/strimzi-kafka-broker created
customresourcedefinition.apiextensions.k8s.io/kafkatopics.kafka.strimzi.io created
customresourcedefinition.apiextensions.k8s.io/kafkabridges.kafka.strimzi.io created
deployment.apps/strimzi-cluster-operator created
customresourcedefinition.apiextensions.k8s.io/kafkaconnectors.kafka.strimzi.io created
customresourcedefinition.apiextensions.k8s.io/kafkaconnects2is.kafka.strimzi.io created
customresourcedefinition.apiextensions.k8s.io/kafkaconnects.kafka.strimzi.io created
customresourcedefinition.apiextensions.k8s.io/kafkamirrormakers.kafka.strimzi.io created
kafka.kafka.strimzi.io/my-cluster created
</code></pre></div><p>Run the following command to wait until kafka is ready, in may take few minutes (2 minutes on my laptop)</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl <span class="token function">wait</span> kafka/my-cluster --for<span class="token operator">=</span>condition<span class="token operator">=</span>Ready --timeout<span class="token operator">=</span>300s -n kafka
kafka.kafka.strimzi.io/my-cluster condition met
</code></pre></div><h3 id="test-using-kafka-console-producer-and-kafka-console-consumer"><a href="#test-using-kafka-console-producer-and-kafka-console-consumer" class="header-anchor">#</a> Test using kafka-console-producer and kafka-console-consumer</h3> <p>Run this command to deploy a console producer, enter some texte and tape enter for each message, (Ctrl+C) to exit.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl -n kafka run kafka-producer -ti --image<span class="token operator">=</span>strimzi/kafka:0.17.0-kafka-2.4.0 --rm<span class="token operator">=</span>true --restart<span class="token operator">=</span>Never -- bin/kafka-console-producer.sh --broker-list my-cluster-kafka-bootstrap:9092 --topic my-topic
</code></pre></div><p>Run this command to deploy a console consumer, you should see messages sent using producer into previous step.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl -n kafka run kafka-consumer -ti --image<span class="token operator">=</span>strimzi/kafka:0.17.0-kafka-2.4.0 --rm<span class="token operator">=</span>true --restart<span class="token operator">=</span>Never -- bin/kafka-console-consumer.sh --bootstrap-server my-cluster-kafka-bootstrap:9092 --topic my-topic --from-beginning
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.9867d2ee.js" defer></script><script src="/assets/js/4.c6323ad2.js" defer></script><script src="/assets/js/2.79e1ebb6.js" defer></script><script src="/assets/js/13.39b88b44.js" defer></script><script src="/assets/js/6.d7f91b89.js" defer></script>
  </body>
</html>
